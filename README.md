# Izhi

Analyze GitHub PR review activity across an organization.

## Name Origins

Both names come from [Ojibwe](https://en.wikipedia.org/wiki/Ojibwe_language) (also known as Anishinaabemowin), an Algonquian language spoken by the Anishinaabe people around the Great Lakes region of North America, from Quebec through Ontario and Manitoba, and in the US from Michigan to Montana.

- **izhi** - A verb meaning "say to, speak so to" ([source](https://ojibwe.lib.umn.edu/main-entry/izhi-vta)). The stem /iN-/ carries the sense of "thus, in a certain direction, in a certain manner." Used in contexts like telling someone something, giving directions, or conveying a message.

- **mikan** - A verb meaning "find it" ([source](https://ojibwe.lib.umn.edu/main-entry/mikan-vti)). From the stem /mik-/, used when locating or discovering somethingâ€”"I find it" (*nimikaan*), "try to find it," or "I can't find the document."

## Installation

```bash
pip install izhi
```

## Usage

### Collect PR Data

```bash
# Set your GitHub token
export GITHUB_TOKEN=ghp_...

# Fetch PR data for an organization
izhi --org myorg --output data.json

# Filter by date range
izhi --org myorg --since 2024-01-01 --until 2024-12-31 --output data.json
```

### Options

| Option | Description |
|--------|-------------|
| `--org` | GitHub organization name (required) |
| `--output`, `-o` | Output file (default: `{org}.json`) |
| `--token` | GitHub Personal Access Token |
| `--app-id` | GitHub App ID |
| `--private-key` | GitHub App private key path |
| `--installation-id` | GitHub App installation ID |
| `--since` | Start date (YYYY-MM-DD) |
| `--until` | End date (YYYY-MM-DD) |
| `--include-repo` | Only include repos matching pattern (supports wildcards, repeatable) |
| `--ignore-repo` | Exclude repos matching pattern (supports wildcards, repeatable) |
| `--use-gh-cli` | Use gh CLI instead of PyGithub (useful for EMU orgs) |
| `--verbose` | Enable verbose logging |

### View Dashboard

```bash
# Open dashboard in browser (default port 8080)
mikan

# Use custom port
mikan --port 3000

# Don't auto-open browser
mikan --no-browser
```

| Option | Description |
|--------|-------------|
| `--port`, `-p` | Port to serve on (default: 8080) |
| `--no-browser` | Don't open browser automatically |

Load your JSON data file in the dashboard to visualize PR review patterns.

## Output JSON Structure

The collector outputs raw PR event data. Each PR contains a chronological list of events. The file is saved incrementally after each repository is processed.

```json
{
  "organization": "example-org",
  "generated_at": "2024-01-15T12:00:00+00:00",
  "date_range": {
    "since": "2024-01-01",
    "until": "2024-01-15"
  },
  "repositories": {
    "repo-name": [
      {
        "number": 123,
        "title": "Add new feature",
        "events": [
          {"type": "created", "date": "2024-01-10T10:00:00", "person": "author"},
          {"type": "comment", "date": "2024-01-10T14:30:00", "person": "reviewer1"},
          {"type": "comment", "date": "2024-01-11T09:00:00", "person": "reviewer2"},
          {"type": "merged", "date": "2024-01-11T15:00:00", "person": "author"}
        ]
      }
    ]
  }
}
```

Event types:
- `created`: PR was opened
- `comment`: Review comment, issue comment, or review body
- `merged`: PR was merged
- `closed`: PR was closed without merging

## Dashboard Charts

- Total comments by person
- Avg comments per PR by person
- PRs created by person
- PRs merged by person
- PRs by repository (open/merged/closed)
- Avg time to first comment by repo
- Avg time to close by repo
- Bot filtering toggle

## Development

### Collector

```bash
cd collector
pip install -e ".[dev]"
pytest
```

### Dashboard

```bash
cd dashboard
npm install
npm run dev
```

Open http://localhost:5173 and upload the JSON file generated by the collector.
